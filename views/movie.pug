extends layout.pug
include utils.pug
    //- .errors-container

block head
    title #{movie.name}
    link(rel='stylesheet' href='/stylesheets/movie.css')

    block nav
        include navBar.pug

block content
    div(class='individualPage')
        div(class='movie__info')
            div(class='movieBlock')
                img(src=`${movie.movieImg}` alt='movieImg' class='singleMovieImg')
            div(class='movieName')
                h2 #{movie.name}
            div(class='releaseYear')
                h2 Released: #{movie.releaseYear}
            div(class='director')
                h2 Director: #{movie.director}
            div(class='cast')
                h2 Cast: #{movie.cast}
            div(class='tagline')
                h2 #{movie.tagline}
            div(class='quote')
                h2 #{movie.quote}
            div(class='synopsis')
                h2 Synopsis: #{movie.description}
        div(class="user_reviews")
            h4 User Reviews
            each review in reviews
                div #{review.createdAt.toLocaleString()}
                div #{review.User.username}: #{review.review}
                    br
                    if review.LikesDislike.rating == true
                        label(class='rating-label') Rating:
                            img(src='../images/thumbs-up.png', alt="thumbsUp" class='ratingImg')
                    else
                        label(class='rating_label') Rating:
                            img(src='../images/thumbs-down.png', alt='thumbsDown' class='ratingImg')
                if locals.authenticated
                    if locals.user.id === review.user_id
                        form(method='post' action=`/movies/${review.id}/delete`)
                            button(class='delete_button') Delete Review
            br
            if locals.authenticated
                form(method='post' action=`/movies/${movie.id}`)
                    input(type='hidden' name='_csrf' value=token)
                    br
                    label(class='form_header') Post a review and leave a rating!
                    br
                    textarea(id='review' value=review name='review')
                    br
                    label(class="form_header") Did you like this movie, click here?
                    input(type='checkbox' value='true' name='likeDislike')
                    br
                    button(class='post_button') Post
            else
                br
                label(class='non_user') Please login to post a review!
    //-insert other comments here
